<main>
  <section>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <img
            src="../assets/static/images/logo.png"
            height="60px"
            alt="Sabka Bazaar"
          />
        </a>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a
                class="nav-link active"
                aria-current="page"
                (click)="navigateHome()"
                >Home</a
              >
            </li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="navbarDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Products
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li *ngFor="let item of categories" class="dropdown-item">
                  <span (click)="navigateToCategory(item.id)"
                    >{{ item.name }}
                    <hr class="dropdown-divider"
                  /></span>
                </li>
              </ul>
            </li>
          </ul>
        </div>
        <ul class="navbar-nav">
          <li class="nav-item">
            <div>
              <span
                class="btn-light sign-in-register"
                (click)="navigateToRegistration('signin')"
              >
                SignIn
              </span>
              <span
                class="btn-light sign-in-register"
                (click)="navigateToRegistration('register')"
              >
                Register
              </span>
            </div>
            <div
              class="cart-button"
              data-bs-toggle="modal"
              data-bs-target="#exampleModal"
            >
              <img src="../assets/static/images/cart.svg" alt="Cart" /><span
                >{{ cartItems.length }} Item</span
              >
            </div>
            <!-- Modal -->
            <div
              class="modal fade"
              id="exampleModal"
              tabindex="-1"
              aria-labelledby="exampleModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">
                      My Cart ({{ cartItems.length }} Item)
                    </h5>
                    <button
                      type="button"
                      class="btn-close btn-close-white"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    ></button>
                  </div>
                  <div class="modal-body">
                    <div *ngFor="let item of cartItems">
                      <div *ngIf="item.length" class="cart-item-align">
                        <img class="vertical-align" [src]="item[0].imageURL" />
                        <div class="vertical-align">
                          <h6>{{ item[0].name }}</h6>
                          <div>
                            <button class="btn" (click)="item.pop()">-</button>
                            {{ item.length }}
                            <button class="btn" (click)="item.push(item[0])">
                              +
                            </button>
                            <span> x {{ item[0].price }}</span>
                          </div>
                        </div>
                        <p class="vertical-align">
                          Rs.{{ item.length * item[0].price }}
                        </p>
                      </div>
                    </div>
                    <span *ngIf="!cartItems.length">
                      <h5>No items in your cart</h5>
                      <p>Your favourite items are just a click away</p>
                    </span>
                    <div class="proceed-to-checkout">
                      <img
                        src="assets/static/images/lowest-price.png"
                        alt="Lowest price banner"
                      />
                    </div>
                  </div>
                  <div class="modal-footer">
                    <p class="proceed-to-checkout">
                      Promo code can be applied on payment page
                    </p>
                    <button
                      type="button"
                      class="btn btn-primary proceed-to-checkout"
                    >
                      Proceed to checkout
                      <span>Rs.{{ total }} ></span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </nav>
  </section>

  <div class="btn-group categories-drop-down">
    <button
      type="button"
      class="btn btn-danger dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-expanded="false"
    >
      Action
    </button>
    <ul class="dropdown-menu">
      <li *ngFor="let item of categories" class="dropdown-item">
        <span (click)="navigateToCategory(item.id)"
          >{{ item.name }}
          <hr class="dropdown-divider"
        /></span>
      </li>
    </ul>
  </div>

  <router-outlet></router-outlet>

  <footer>
    Copyright &copy; 2011-2022 Sabka Bazaar Grocery Supplies Pvt Ltd
  </footer>
</main>
